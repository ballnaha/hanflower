generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model category {
  id          String    @id
  name        String?
  title       String
  subtitle    String?
  slug        String    @unique(map: "category_slug_unique")
  description String?   @db.Text
  image       String?
  isActive    Boolean   @default(true)
  priority    Int       @default(0)
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
  product     product[]
}

model product {
  id                     String                   @id
  title                  String
  slug                   String                   @unique(map: "Product_slug_key")
  type                   String
  price                  Decimal                  @db.Decimal(10, 2)
  originalPrice          Decimal?                 @db.Decimal(10, 2)
  discount               Int?
  description            String                   @db.Text
  image                  String
  stock                  Int                      @default(0)
  priority               Int                      @default(0)
  createdAt              DateTime                 @default(now())
  updatedAt              DateTime                 @updatedAt
  sku                    String                   @unique(map: "Product_sku_key")
  categoryId             String?
  discountVelvet         Int?
  hasQrCode              Boolean                  @default(true)
  isBestSeller           Boolean                  @default(false)
  isNew                  Boolean                  @default(false)
  originalPriceVelvet    Decimal?                 @db.Decimal(10, 2)
  priceVelvet            Decimal?                 @db.Decimal(10, 2)
  qrCodePrice            Decimal?                 @default(150.00) @db.Decimal(10, 2)
  stockVelvet            Int                      @default(0)
  valentinecardtoproduct valentinecardtoproduct[]
  orderitem              orderitem[]
  category               category?                @relation(fields: [categoryId], references: [id], map: "Product_categoryId_fkey")
  productdetail          productdetail[]
  productfeature         productfeature[]
  productimage           productimage[]
  productshipping        productshipping[]

  @@index([categoryId], map: "Product_categoryId_fkey")
}

model productdetail {
  id        String  @id @default(uuid())
  text      String
  productId String
  product   product @relation(fields: [productId], references: [id], onDelete: Cascade, map: "ProductDetail_productId_fkey")

  @@index([productId], map: "ProductDetail_productId_fkey")
}

model productfeature {
  id        String  @id @default(uuid())
  text      String
  productId String
  product   product @relation(fields: [productId], references: [id], onDelete: Cascade, map: "ProductFeature_productId_fkey")

  @@index([productId], map: "ProductFeature_productId_fkey")
}

model productimage {
  id        String  @id @default(uuid())
  url       String
  productId String
  product   product @relation(fields: [productId], references: [id], onDelete: Cascade, map: "ProductImage_productId_fkey")

  @@index([productId], map: "ProductImage_productId_fkey")
}

model productshipping {
  id        String  @id @default(uuid())
  text      String
  productId String
  product   product @relation(fields: [productId], references: [id], onDelete: Cascade, map: "ProductShipping_productId_fkey")

  @@index([productId], map: "ProductShipping_productId_fkey")
}

model order {
  id              String      @id
  orderNumber     String      @unique(map: "Order_orderNumber_key")
  customerName    String
  customerEmail   String
  customerPhone   String
  customerAddress String      @db.Text
  totalAmount     Decimal     @db.Decimal(10, 2)
  status          String      @default("pending")
  paymentStatus   String      @default("unpaid")
  paymentMethod   String?
  shippingMethod  String?
  shippingFee     Decimal     @default(0.00) @db.Decimal(10, 2)
  notes           String?     @db.Text
  createdAt       DateTime    @default(now())
  updatedAt       DateTime    @updatedAt
  items           orderitem[]
}

model orderitem {
  id        String  @id
  orderId   String
  productId String
  quantity  Int
  price     Decimal @db.Decimal(10, 2)
  order     order   @relation(fields: [orderId], references: [id], onDelete: Cascade, map: "OrderItem_orderId_fkey")
  product   product @relation(fields: [productId], references: [id], map: "OrderItem_productId_fkey")

  @@index([orderId], map: "OrderItem_orderId_fkey")
  @@index([productId], map: "OrderItem_productId_fkey")
}

model user {
  id        String   @id
  password  String
  role      String   @default("user")
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  email     String?  @unique(map: "User_email_key")
  name      String?
  username  String   @unique
}

model setting {
  key         String   @id
  value       String   @db.Text
  description String?
  updatedAt   DateTime @updatedAt
}

model coupon {
  id          String    @id @default(cuid())
  code        String    @unique
  discount    Float
  type        String    @default("fixed")
  minSpend    Float     @default(0)
  maxDiscount Float?
  limit       Int?
  expireAt    DateTime?
  isActive    Boolean   @default(true)
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
}

model shippingmethod {
  id            String   @id @default(cuid())
  code          String   @unique
  name          String
  description   String?  @db.Text
  price         Decimal  @db.Decimal(10, 2)
  estimatedDays String?
  enabled       Boolean  @default(true)
  priority      Int      @default(0)
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
}

model valentinecardtoproduct {
  A             String
  B             String
  valentinecard valentinecard @relation(fields: [A], references: [id], onDelete: Cascade, map: "_ValentineCardToproduct_A_fkey")
  product       product       @relation(fields: [B], references: [id], onDelete: Cascade, map: "_ValentineCardToproduct_B_fkey")

  @@unique([A, B], map: "_ValentineCardToproduct_AB_unique")
  @@index([B], map: "_ValentineCardToproduct_B_index")
  @@map("_valentinecardtoproduct")
}

model eventalbum {
  id          String       @id
  title       String
  category    String?
  location    String?
  date        String?
  coverImage  String
  imagesCount Int          @default(0)
  isActive    Boolean      @default(true)
  priority    Int          @default(0)
  createdAt   DateTime     @default(now())
  updatedAt   DateTime
  eventphoto  eventphoto[]
}

model eventphoto {
  id         String     @id
  albumId    String
  url        String
  caption    String?
  order      Int        @default(0)
  createdAt  DateTime   @default(now())
  eventalbum eventalbum @relation(fields: [albumId], references: [id], onDelete: Cascade, map: "EventPhoto_albumId_fkey")

  @@index([albumId], map: "EventPhoto_albumId_fkey")
}

model valentinecard {
  id                       String                   @id
  slug                     String                   @unique(map: "ValentineCard_slug_key")
  jobName                  String?
  title                    String
  openingText              String?
  greeting                 String?
  subtitle                 String?
  message                  String?                  @db.Text
  signer                   String?
  backgroundColor          String?                  @default("#FFF0F3")
  status                   String                   @default("active")
  disabledAt               DateTime?
  backgroundMusicYoutubeId String?
  backgroundMusicUrl       String?                  @db.Text
  swipeHintColor           String?                  @default("white")
  swipeHintText            String?                  @default("Swipe up")
  showGame                 Boolean                  @default(true)
  campaignName             String?                  @default("Valentine's")
  customerPhone            String?
  customerAddress          String?                  @db.Text
  note                     String?                  @db.Text
  createdAt                DateTime                 @default(now())
  updatedAt                DateTime
  valentinecardtoproduct   valentinecardtoproduct[]
  valentinememory          valentinememory[]
  valentinescore           valentinescore[]
}

model valentinememory {
  id            String        @id
  cardId        String
  type          String        @default("image")
  url           String        @db.Text
  caption       String?
  thumbnail     String?       @db.Text
  order         Int           @default(0)
  createdAt     DateTime      @default(now())
  updatedAt     DateTime
  valentinecard valentinecard @relation(fields: [cardId], references: [id], onDelete: Cascade, map: "ValentineMemory_cardId_fkey")

  @@index([cardId], map: "ValentineMemory_cardId_fkey")
}

model valentinescore {
  id            String        @id
  cardId        String
  score         Int
  createdAt     DateTime      @default(now())
  name          String
  playerId      String
  valentinecard valentinecard @relation(fields: [cardId], references: [id], onDelete: Cascade, map: "ValentineScore_cardId_fkey")

  @@index([cardId], map: "ValentineScore_cardId_fkey")
  @@index([playerId], map: "ValentineScore_playerId_idx")
  @@index([score], map: "ValentineScore_score_idx")
}
